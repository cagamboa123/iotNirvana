/*
 * Copyright (C) 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy of
 * the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */

package com.google.cloud.demo.iot.nirvana.servlet.rest;

import com.google.cloud.demo.iot.nirvana.datastore.DatastoreService;
import com.google.cloud.demo.iot.nirvana.datastore.entity.City;
import com.google.cloud.demo.iot.nirvana.shared.Constants;
import com.google.cloud.demo.iot.nirvana.shared.Utils;
import com.google.gson.Gson;
import java.io.IOException;
import java.util.List;
import java.util.logging.Logger;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/** Class that represents a servlet used to get application configuration */
public class GetLoadConfigurationCities extends HttpServlet {

  private static final long serialVersionUID = 6919710226120460383L;
  private static final Logger LOG = Logger.getLogger(GetLoadConfigurationCities.class.getName());

  public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {
    // manage dev env
    if (!Utils.isGaeProduction()) {
      resp.addHeader("Access-Control-Allow-Origin", Constants.GAE_DEV_ADDRESS);
    }
    // include cookies
    resp.addHeader("Access-Control-Allow-Credentials", "true");

    // add cities
    String citiesTemp =
        "[{\"name\":\"Albania - Tirana\",\"temperature\":18,\"lat\":41.3275459,\"lng\":19.81869819999997},{\"name\":\"Algeria - Algiers\",\"temperature\":23,\"lat\":36.753768,\"lng\":3.0587560999999823},{\"name\":\"Angola - Luanda\",\"temperature\":27,\"lat\":-8.839987599999999,\"lng\":13.289436799999976},{\"name\":\"Antigua and Barbuda - Saint John's\",\"temperature\":26,\"lat\":17.1274104,\"lng\":-61.84677199999999},{\"name\":\"Argentina - Buenos Aires\",\"temperature\":15,\"lat\":-34.6036844,\"lng\":-58.381559100000004},{\"name\":\"Armenia - Yerevan\",\"temperature\":1,\"lat\":40.1791857,\"lng\":44.499102900000025},{\"name\":\"Aruba - Oranjestad\",\"temperature\":31,\"lat\":12.5092044,\"lng\":-70.0086306},{\"name\":\"Australia - Australian Capital Territory - Canberra\",\"temperature\":8,\"lat\":-35.3075,\"lng\":149.124417},{\"name\":\"Austria - Vienna - Vienna\",\"temperature\":7,\"lat\":48.2081743,\"lng\":16.37381890000006},{\"name\":\"Azerbaijan - Baku\",\"temperature\":8,\"lat\":40.40926169999999,\"lng\":49.86709240000005},{\"name\":\"Bahamas - Nassau\",\"temperature\":28,\"lat\":25.0479835,\"lng\":-77.355413},{\"name\":\"Bahrain - Manama\",\"temperature\":29,\"lat\":26.2285161,\"lng\":50.58604969999999},{\"name\":\"Bangladesh - Dhaka\",\"temperature\":34,\"lat\":23.810332,\"lng\":90.41251809999994},{\"name\":\"Barbados - Bridgetown\",\"temperature\":31,\"lat\":13.1132219,\"lng\":-59.598808899999995},{\"name\":\"Belarus - Minsk\",\"temperature\":1,\"lat\":53.90453979999999,\"lng\":27.561524400000053},{\"name\":\"Belgium - Brussels\",\"temperature\":9,\"lat\":50.8503396,\"lng\":4.351710300000036},{\"name\":\"Belize - Belmopan\",\"temperature\":25,\"lat\":17.2510114,\"lng\":-88.75902009999999},{\"name\":\"Benin - Porto Novo\",\"temperature\":31,\"lat\":6.4968574,\"lng\":2.6288523000000623},{\"name\":\"Bermuda - Hamilton\",\"temperature\":22,\"lat\":32.294816,\"lng\":-64.78137500000003},{\"name\":\"Bhutan - Thimphu\",\"temperature\":-1,\"lat\":27.4727924,\"lng\":89.63928629999998},{\"name\":\"Bosnia-Herzegovina - Sarajevo\",\"temperature\":15,\"lat\":43.8562586,\"lng\":18.413076300000057},{\"name\":\"Botswana - Gaborone\",\"temperature\":36,\"lat\":-24.6282079,\"lng\":25.92314710000005},{\"name\":\"Brazil - Distrito Federal - Brasilia\",\"temperature\":28,\"lat\":-15.7942287,\"lng\":-47.882165799999996},{\"name\":\"British Virgin Islands - Tortola - Road Town\",\"temperature\":26,\"lat\":18.4286115,\"lng\":-64.6184657},{\"name\":\"Brunei - Bandar Seri Begawan\",\"temperature\":26,\"lat\":4.903052199999999,\"lng\":114.93982099999994},{\"name\":\"Bulgaria - Sofia\",\"temperature\":14,\"lat\":42.6977082,\"lng\":23.321867500000053},{\"name\":\"Cabo Verde - Praia\",\"temperature\":31,\"lat\":14.93305,\"lng\":-23.513326699999993},{\"name\":\"Cambodia - Phnom Penh\",\"temperature\":28,\"lat\":11.5448729,\"lng\":104.89216680000004},{\"name\":\"Cameroon - Yaoundé\",\"temperature\":30,\"lat\":3.8480325,\"lng\":11.502075200000036},{\"name\":\"Canada - Ontario - Ottawa\",\"temperature\":13,\"lat\":45.4215296,\"lng\":-75.69719309999999},{\"name\":\"Cayman Islands - George Town\",\"temperature\":30,\"lat\":19.2869323,\"lng\":-81.36743890000002},{\"name\":\"Central African Republic - Bangui\",\"temperature\":23,\"lat\":4.3946735,\"lng\":18.558189900000002},{\"name\":\"Chad - Ndjamena\",\"temperature\":37,\"lat\":12.1348457,\"lng\":15.055741500000067},{\"name\":\"Chile - Santiago\",\"temperature\":19,\"lat\":-33.4378305,\"lng\":-70.65044920000003},{\"name\":\"China - Beijing Municipality - Beijing\",\"temperature\":6,\"lat\":39.904211,\"lng\":116.40739499999995},{\"name\":\"Colombia - Bogota\",\"temperature\":18,\"lat\":4.710988599999999,\"lng\":-74.072092},{\"name\":\"Comoros - Moroni\",\"temperature\":28,\"lat\":-11.7172157,\"lng\":43.24731459999998},{\"name\":\"Congo - Brazzaville\",\"temperature\":30,\"lat\":-4.2633597,\"lng\":15.242885300000012},{\"name\":\"Congo Dem. Rep. - Kinshasa\",\"temperature\":30,\"lat\":-4.4419311,\"lng\":15.266293099999984},{\"name\":\"Cook Islands - Rarotonga\",\"temperature\":24,\"lat\":-21.2292371,\"lng\":-159.7763491},{\"name\":\"Costa Rica - San Jose\",\"temperature\":24,\"lat\":9.9280694,\"lng\":-84.09072459999999},{\"name\":\"Cote d'Ivoire (Ivory Coast) - Yamoussoukro\",\"temperature\":18,\"lat\":6.827622799999999,\"lng\":-5.289343300000041},{\"name\":\"Croatia - Zagreb\",\"temperature\":14,\"lat\":45.8150108,\"lng\":15.981919000000062},{\"name\":\"Cuba - Havana\",\"temperature\":27,\"lat\":23.1135925,\"lng\":-82.36659559999998},{\"name\":\"Cyprus - Nicosia\",\"temperature\":20,\"lat\":35.1855659,\"lng\":33.38227640000002},{\"name\":\"Czech Republic - Prague\",\"temperature\":5,\"lat\":50.0755381,\"lng\":14.43780049999998},{\"name\":\"Denmark - Copenhagen\",\"temperature\":4,\"lat\":55.6760968,\"lng\":12.568337100000008},{\"name\":\"Djibouti - Djibouti\",\"temperature\":31,\"lat\":11.5720765,\"lng\":43.145647499999995},{\"name\":\"Dominica - Roseau\",\"temperature\":28,\"lat\":15.3091676,\"lng\":-61.37935540000001},{\"name\":\"Dominican Republic - Santo Domingo\",\"temperature\":30,\"lat\":18.4860575,\"lng\":-69.9312117},{\"name\":\"Ecuador - Quito\",\"temperature\":18,\"lat\":-0.1806532,\"lng\":-78.46783820000002},{\"name\":\"Egypt - Cairo\",\"temperature\":23,\"lat\":30.0444196,\"lng\":31.23571160000006},{\"name\":\"El Salvador - San Salvador\",\"temperature\":24,\"lat\":13.6929403,\"lng\":-89.21819110000001},{\"name\":\"Equatorial Guinea - Malabo\",\"temperature\":30,\"lat\":3.7504118,\"lng\":8.737103899999966},{\"name\":\"Estonia - Tallinn\",\"temperature\":-2,\"lat\":59.43696079999999,\"lng\":24.75357459999998},{\"name\":\"Ethiopia - Addis Ababa\",\"temperature\":19,\"lat\":8.9806034,\"lng\":38.75776050000002},{\"name\":\"Falkland Islands - Stanley\",\"temperature\":12,\"lat\":-51.6977129,\"lng\":-57.85166270000002},{\"name\":\"Fiji - Suva\",\"temperature\":24,\"lat\":-18.1248086,\"lng\":178.4500789},{\"name\":\"Finland - Helsinki\",\"temperature\":-2,\"lat\":60.16985569999999,\"lng\":24.93837899999994},{\"name\":\"France - Île-de-France - Paris\",\"temperature\":10,\"lat\":48.856614,\"lng\":2.3522219000000177},{\"name\":\"Gabon - Libreville\",\"temperature\":28,\"lat\":0.4161976,\"lng\":9.467267600000014},{\"name\":\"Gambia - Banjul\",\"temperature\":32,\"lat\":13.4548761,\"lng\":-16.579032299999994},{\"name\":\"Georgia - Tbilisi\",\"temperature\":6,\"lat\":41.7151377,\"lng\":44.82709599999998},{\"name\":\"Germany - Berlin - Berlin\",\"temperature\":8,\"lat\":52.52000659999999,\"lng\":13.404953999999975},{\"name\":\"Ghana - Accra\",\"temperature\":29,\"lat\":5.6037168,\"lng\":-0.18696439999996528},{\"name\":\"Gibraltar - Gibraltar\",\"temperature\":21,\"lat\":36.1407734,\"lng\":-5.353599400000007},{\"name\":\"Greece - Athens\",\"temperature\":17,\"lat\":37.9838096,\"lng\":23.727538800000048},{\"name\":\"Greenland - Nuuk\",\"temperature\":-3,\"lat\":64.18140989999999,\"lng\":-51.69413800000001},{\"name\":\"Grenada - Saint George's\",\"temperature\":32,\"lat\":12.0560975,\"lng\":-61.748799599999984},{\"name\":\"Guatemala - Guatemala name\",\"temperature\":20,\"lat\":14.6349149,\"lng\":-90.5068824},{\"name\":\"Guinea - Conakry\",\"temperature\":31,\"lat\":9.641185499999999,\"lng\":-13.57840120000003},{\"name\":\"Guinea-Bissau - Bissau\",\"temperature\":32,\"lat\":11.8816553,\"lng\":-15.617794199999935},{\"name\":\"Guyana - Georgetown\",\"temperature\":29,\"lat\":6.8012793,\"lng\":-58.1551255},{\"name\":\"Haiti - Port-au-Prince\",\"temperature\":30,\"lat\":18.594395,\"lng\":-72.30743259999997},{\"name\":\"Honduras - Tegucigalpa\",\"temperature\":23,\"lat\":14.0722751,\"lng\":-87.192136},{\"name\":\"Hungary - Budapest\",\"temperature\":11,\"lat\":47.497912,\"lng\":19.04023499999994},{\"name\":\"Iceland - Reykjavik\",\"temperature\":6,\"lat\":64.12652059999999,\"lng\":-21.817439299999933},{\"name\":\"India - Delhi - New Delhi\",\"temperature\":30,\"lat\":28.6139391,\"lng\":77.20902120000005},{\"name\":\"Indonesia - Jakarta Special Capital Region - Jakarta\",\"temperature\":28,\"lat\":-6.1744651,\"lng\":106.82274499999994},{\"name\":\"Iran - Tehran\",\"temperature\":16,\"lat\":35.6891975,\"lng\":51.388973599999986},{\"name\":\"Iraq - Baghdad\",\"temperature\":24,\"lat\":33.3128057,\"lng\":44.36148750000007},{\"name\":\"Ireland - Dublin\",\"temperature\":9,\"lat\":53.3498053,\"lng\":-6.260309699999993},{\"name\":\"Isle of Man - Douglas\",\"temperature\":10,\"lat\":54.1523372,\"lng\":-4.4861227999999755},{\"name\":\"Israel - Jerusalem\",\"temperature\":21,\"lat\":31.768319,\"lng\":35.21370999999999},{\"name\":\"Italy - Rome\",\"temperature\":20,\"lat\":41.9027835,\"lng\":12.496365500000024},{\"name\":\"Jamaica - Kingston\",\"temperature\":31,\"lat\":18.0178743,\"lng\":-76.80990409999998},{\"name\":\"Japan - Tokyo\",\"temperature\":9,\"lat\":35.7090259,\"lng\":139.73199249999993},{\"name\":\"Jordan - Amman\",\"temperature\":17,\"lat\":31.9453666,\"lng\":35.92837159999999},{\"name\":\"Kazakhstan - Astana\",\"temperature\":-3,\"lat\":51.16052269999999,\"lng\":71.4703558},{\"name\":\"Kenya - Nairobi\",\"temperature\":23,\"lat\":-1.2920659,\"lng\":36.82194619999996},{\"name\":\"Kiribati - Tarawa\",\"temperature\":28,\"lat\":1.3290526,\"lng\":172.97905279999998},{\"name\":\"Kosovo - Pristina\",\"temperature\":14,\"lat\":42.6629138,\"lng\":21.165502800000013},{\"name\":\"Kuwait - Kuwait name\",\"temperature\":29,\"lat\":29.375859,\"lng\":47.97740520000002},{\"name\":\"Kyrgyzstan - Bishkek\",\"temperature\":20,\"lat\":42.8746212,\"lng\":74.56976170000007},{\"name\":\"Laos - Vientiane\",\"temperature\":26,\"lat\":17.9757058,\"lng\":102.63310350000006},{\"name\":\"Latvia - Riga\",\"temperature\":4,\"lat\":56.9496487,\"lng\":24.10518639999998},{\"name\":\"Lebanon - Beirut\",\"temperature\":22,\"lat\":33.8937913,\"lng\":35.50177669999994},{\"name\":\"Liberia - Monrovia\",\"temperature\":31,\"lat\":6.2907432,\"lng\":-10.760523899999953},{\"name\":\"Liechtenstein - Vaduz\",\"temperature\":12,\"lat\":47.1410303,\"lng\":9.520927700000016},{\"name\":\"Lithuania - Vilnius\",\"temperature\":3,\"lat\":54.6871555,\"lng\":25.279651400000034},{\"name\":\"Luxembourg - Luxembourg\",\"temperature\":9,\"lat\":49.61162100000001,\"lng\":6.131934600000022},{\"name\":\"Macedonia\",\"temperature\":13,\"lat\":41.608635,\"lng\":21.745274999999992},{\"name\":\"Madagascar - Antananarivo\",\"temperature\":21,\"lat\":-18.8791902,\"lng\":47.50790549999999},{\"name\":\"Malawi - Lilongwe\",\"temperature\":28,\"lat\":-13.9626121,\"lng\":33.77411949999998},{\"name\":\"Malaysia - Kuala Lumpur\",\"temperature\":27,\"lat\":3.139003,\"lng\":101.68685499999992},{\"name\":\"Maldives - Male\",\"temperature\":28,\"lat\":4.1754959,\"lng\":73.50934740000002},{\"name\":\"Mali - Bamako\",\"temperature\":29,\"lat\":12.6392316,\"lng\":-8.002889200000027},{\"name\":\"Malta - Valletta\",\"temperature\":21,\"lat\":35.8989085,\"lng\":14.514552800000047},{\"name\":\"Marshall Islands - Majuro\",\"temperature\":29,\"lat\":7.0921515,\"lng\":171.38255819999995},{\"name\":\"Mauritania - Nouakchott\",\"temperature\":35,\"lat\":18.0735299,\"lng\":-15.958237199999985},{\"name\":\"Mauritius - Port Louis\",\"temperature\":22,\"lat\":-20.1608912,\"lng\":57.50122220000003},{\"name\":\"Mexico - Ciudad de México - Mexico name\",\"temperature\":10,\"lat\":19.4326077,\"lng\":-99.13320799999997},{\"name\":\"Micronesia - Pohnpei - Palikir\",\"temperature\":25,\"lat\":6.9147118,\"lng\":158.16102739999997},{\"name\":\"Moldova - Chișinău\",\"temperature\":9,\"lat\":47.0104529,\"lng\":28.86381030000007},{\"name\":\"Monaco - Monaco\",\"temperature\":20,\"lat\":43.73741099999999,\"lng\":7.420816000000059},{\"name\":\"Mongolia - Ulaanbaatar\",\"temperature\":-4,\"lat\":47.88639879999999,\"lng\":106.90574390000006},{\"name\":\"Montenegro - Podgorica\",\"temperature\":15,\"lat\":42.4304196,\"lng\":19.259364199999936},{\"name\":\"Montserrat - Brades\",\"temperature\":26,\"lat\":16.7909044,\"lng\":-62.21062410000002},{\"name\":\"Morocco - Rabat\",\"temperature\":27,\"lat\":33.9715904,\"lng\":-6.849812899999961},{\"name\":\"Mozambique - Maputo\",\"temperature\":25,\"lat\":-25.891968,\"lng\":32.605135099999984},{\"name\":\"Namibia - Windhoek\",\"temperature\":33,\"lat\":-22.5608807,\"lng\":17.0657549},{\"name\":\"Nepal - Kathmandu\",\"temperature\":16,\"lat\":27.7172453,\"lng\":85.3239605},{\"name\":\"Netherlands - Amsterdam\",\"temperature\":10,\"lat\":52.3702157,\"lng\":4.895167899999933},{\"name\":\"New Zealand - Wellington\",\"temperature\":12,\"lat\":-41.2864603,\"lng\":174.77623600000004},{\"name\":\"Nicaragua - Managua\",\"temperature\":28,\"lat\":12.1149926,\"lng\":-86.23617439999998},{\"name\":\"Niger - Niamey\",\"temperature\":39,\"lat\":13.5115963,\"lng\":2.1253854000000274},{\"name\":\"Niue - Alofi\",\"temperature\":24,\"lat\":-19.0553711,\"lng\":-169.91787090000003},{\"name\":\"North Korea - Pyongyang\",\"temperature\":3,\"lat\":39.0392193,\"lng\":125.76252410000006},{\"name\":\"Norway - Oslo\",\"temperature\":3,\"lat\":59.9138688,\"lng\":10.752245399999993},{\"name\":\"Oman - Muscat\",\"temperature\":28,\"lat\":23.58589,\"lng\":58.40592270000002},{\"name\":\"Pakistan - Islamabad\",\"temperature\":22,\"lat\":33.7293882,\"lng\":73.09314610000001},{\"name\":\"Panama - Panama\",\"temperature\":28,\"lat\":9.1011785,\"lng\":-79.4028639},{\"name\":\"Papua New Guinea - Port Moresby\",\"temperature\":26,\"lat\":-9.443800399999999,\"lng\":147.18026710000004},{\"name\":\"Paraguay - Asuncion\",\"temperature\":20,\"lat\":-25.2637399,\"lng\":-57.57592599999998},{\"name\":\"Peru - Lima - Lima\",\"temperature\":17,\"lat\":-12.046374,\"lng\":-77.0427934},{\"name\":\"Philippines - Manila\",\"temperature\":25,\"lat\":14.5995124,\"lng\":120.9842195},{\"name\":\"Poland - Warsaw\",\"temperature\":5,\"lat\":52.2296756,\"lng\":21.012228700000037},{\"name\":\"Portugal - Lisbon\",\"temperature\":20,\"lat\":38.7222524,\"lng\":-9.139336599999979},{\"name\":\"Puerto Rico - San Juan\",\"temperature\":31,\"lat\":18.4655394,\"lng\":-66.10573549999998},{\"name\":\"Qatar - Doha\",\"temperature\":29,\"lat\":25.2854473,\"lng\":51.53103979999992},{\"name\":\"Réunion (French) - Saint-Denis\",\"temperature\":22,\"lat\":-20.88554,\"lng\":55.45723899999996},{\"name\":\"Romania - Bucharest\",\"temperature\":14,\"lat\":44.4267674,\"lng\":26.102538399999958},{\"name\":\"Russia - Moscow\",\"temperature\":-2,\"lat\":55.755826,\"lng\":37.6173},{\"name\":\"Rwanda - Kigali\",\"temperature\":22,\"lat\":-1.9705786,\"lng\":30.10442880000005},{\"name\":\"Saint Helena - Jamestown\",\"temperature\":19,\"lat\":-15.9286343,\"lng\":-5.715174899999965},{\"name\":\"Saint Kitts and Nevis - Basseterre\",\"temperature\":25,\"lat\":17.3026058,\"lng\":-62.71769240000003},{\"name\":\"Saint Lucia - Castries\",\"temperature\":26,\"lat\":14.0101094,\"lng\":-60.98746870000002},{\"name\":\"Saint Vincent and Grenadines - Kingstown\",\"temperature\":25,\"lat\":13.1600249,\"lng\":-61.22481570000002},{\"name\":\"Samoa - Apia\",\"temperature\":25,\"lat\":-13.8506958,\"lng\":-171.7513551},{\"name\":\"San Marino - San Marino\",\"temperature\":15,\"lat\":43.9355907,\"lng\":12.4472806},{\"name\":\"Sao Tome and Principe - São Tomé\",\"temperature\":30,\"lat\":0.3301924,\"lng\":6.733342999999991},{\"name\":\"Saudi Arabia - Riyadh\",\"temperature\":28,\"lat\":24.7135517,\"lng\":46.67529569999999},{\"name\":\"Senegal - Dakar\",\"temperature\":31,\"lat\":14.7645042,\"lng\":-17.366028599999936},{\"name\":\"Serbia - Belgrade\",\"temperature\":16,\"lat\":44.786568,\"lng\":20.44892159999995},{\"name\":\"Seychelles - Victoria\",\"temperature\":27,\"lat\":-4.619143,\"lng\":55.45131489999994},{\"name\":\"Sierra Leone - Freetown\",\"temperature\":30,\"lat\":8.4656765,\"lng\":-13.231722499999933},{\"name\":\"Singapore - Singapore\",\"temperature\":27,\"lat\":1.3553794,\"lng\":103.86774439999999},{\"name\":\"Slovakia - Bratislava\",\"temperature\":8,\"lat\":48.1485965,\"lng\":17.107747700000004},{\"name\":\"Slovenia - Ljubljana\",\"temperature\":11,\"lat\":46.0569465,\"lng\":14.505751499999974},{\"name\":\"Solomon Islands - Gizo\",\"temperature\":25,\"lat\":-8.1058258,\"lng\":156.83499860000006},{\"name\":\"Solomon Islands - Honiara\",\"temperature\":24,\"lat\":-9.4456381,\"lng\":159.97289990000002},{\"name\":\"South Africa - Pretoria\",\"temperature\":28,\"lat\":-25.7478676,\"lng\":28.22927119999997},{\"name\":\"South Korea - Seoul\",\"temperature\":6,\"lat\":37.566535,\"lng\":126.97796919999996},{\"name\":\"Spain - Madrid\",\"temperature\":21,\"lat\":40.4167754,\"lng\":-3.7037901999999576},{\"name\":\"Sri Lanka - Sri Jayawardenapura Kotte\",\"temperature\":27,\"lat\":6.894002899999999,\"lng\":79.90515649999998},{\"name\":\"Sudan - Khartoum\",\"temperature\":36,\"lat\":15.5006544,\"lng\":32.55989939999995},{\"name\":\"Swaziland - Mbabane\",\"temperature\":23,\"lat\":-26.3054482,\"lng\":31.136671500000034},{\"name\":\"Sweden - Stockholm\",\"temperature\":1,\"lat\":59.32932349999999,\"lng\":18.068580800000063},{\"name\":\"Switzerland - Bern - Bern\",\"temperature\":13,\"lat\":46.9479739,\"lng\":7.447446799999966},{\"name\":\"Syria - Damascus\",\"temperature\":19,\"lat\":33.5138073,\"lng\":36.27652790000002},{\"name\":\"Taiwan - Taipei\",\"temperature\":21,\"lat\":25.0329636,\"lng\":121.56542680000007},{\"name\":\"Tajikistan - Dushanbe\",\"temperature\":17,\"lat\":38.5597722,\"lng\":68.78703840000003},{\"name\":\"Tanzania - Dodoma\",\"temperature\":30,\"lat\":-6.162959000000001,\"lng\":35.75160690000007},{\"name\":\"Thailand - Bangkok\",\"temperature\":30,\"lat\":13.82031,\"lng\":100.66471009999998},{\"name\":\"Togo - Lomé\",\"temperature\":32,\"lat\":6.1724969,\"lng\":1.2313618000000588},{\"name\":\"Tonga - Nukualofa\",\"temperature\":22,\"lat\":-21.1393418,\"lng\":-175.204947},{\"name\":\"Trinidad and Tobago - Port of Spain\",\"temperature\":30,\"lat\":10.6549013,\"lng\":-61.50192559999999},{\"name\":\"Tunisia - Tunis\",\"temperature\":24,\"lat\":36.8064948,\"lng\":10.181531599999971},{\"name\":\"Turkey - Ankara\",\"temperature\":5,\"lat\":39.9333635,\"lng\":32.85974190000002},{\"name\":\"Turkmenistan - Ashgabat\",\"temperature\":18,\"lat\":37.9600766,\"lng\":58.32606290000001},{\"name\":\"Tuvalu - Funafuti\",\"temperature\":28,\"lat\":-8.5200657,\"lng\":179.198128},{\"name\":\"Uganda - Kampala\",\"temperature\":27,\"lat\":0.3475964,\"lng\":32.582519700000034},{\"name\":\"Ukraine - Kyiv\",\"temperature\":2,\"lat\":50.4501,\"lng\":30.523400000000038},{\"name\":\"United Arab Emirates - Abu Dhabi - Abu Dhabi\",\"temperature\":31,\"lat\":24.2991738,\"lng\":54.69727739999996},{\"name\":\"United Kingdom - England - London\",\"temperature\":10,\"lat\":51.5073509,\"lng\":-0.12775829999998223},{\"name\":\"Uruguay - Montevideo\",\"temperature\":12,\"lat\":-34.9011127,\"lng\":-56.16453139999999},{\"name\":\"USA - District of Columbia - Washington DC\",\"temperature\":16,\"lat\":38.9071923,\"lng\":-77.03687070000001},{\"name\":\"Uzbekistan - Tashkent\",\"temperature\":21,\"lat\":41.2994958,\"lng\":69.24007340000003},{\"name\":\"Vanuatu - Port Vila\",\"temperature\":19,\"lat\":-17.7332512,\"lng\":168.32732450000003},{\"name\":\"Vatican name State - Vatican name\",\"temperature\":20,\"lat\":41.902916,\"lng\":12.453389000000016},{\"name\":\"Vietnam - Hanoi\",\"temperature\":21,\"lat\":21.0277644,\"lng\":105.83415979999995},{\"name\":\"Yemen - Sana\",\"temperature\":21,\"lat\":15.3694451,\"lng\":44.19100660000004},{\"name\":\"Zimbabwe - Harare\",\"temperature\":29,\"lat\":-17.8251657,\"lng\":31.03350999999998}]";
    Gson gson = new Gson();
    City[] cities = gson.fromJson(citiesTemp, City[].class);

    // save cities to Datastore
    DatastoreService<City> dsCity = new DatastoreService<City>(City.class);
    List<City> storedCities = dsCity.list();
    if (storedCities.size() == 0) {
      for (int i = 0; i < cities.length; i++) {
        City city =
            new City(
                cities[i].getName(),
                cities[i].getLat(),
                cities[i].getLng(),
                cities[i].getTemperature());
        dsCity.save(city);
      }
    }

    // return data
    RestResponse restResponse = new RestResponse();
    resp.setContentType(com.google.common.net.MediaType.JSON_UTF_8.toString());

    restResponse.setCode(javax.servlet.http.HttpServletResponse.SC_OK);
    restResponse.setMessage(Constants.HTML_CODE_200_OK_MESSAGE);
    resp.setStatus(javax.servlet.http.HttpServletResponse.SC_OK);
    resp.getWriter().println(gson.toJson(restResponse));

    return;
  }
}
